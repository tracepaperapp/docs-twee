<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://tracepaper.draftsman.io/docs-twee/04_Pipeline/">
    <link rel="shortcut icon" href="https://tracepaper.draftsman.io/docs-twee/img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Deployment Pipeline - Tracepaper</title>
    <link href="https://tracepaper.draftsman.io/docs-twee/css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="https://tracepaper.draftsman.io/docs-twee/css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="https://tracepaper.draftsman.io/docs-twee/css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="https://tracepaper.draftsman.io/docs-twee/css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="https://tracepaper.draftsman.io/docs-twee/js/jquery-3.2.1.min.js"></script>
    <script src="https://tracepaper.draftsman.io/docs-twee/js/bootstrap-3.3.7.min.js"></script>
    <script src="https://tracepaper.draftsman.io/docs-twee/js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = 'https://tracepaper.draftsman.io/docs-twee';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Deployment Pipeline", url: "#_top", children: [
              {title: "Generate: Prepare Code", url: "#generate-prepare-code" },
              {title: "Package: Prepare Deployment", url: "#package-prepare-deployment" },
              {title: "Staging: Deploy Staging", url: "#staging-deploy-staging" },
              {title: "Quality Gate: Testing", url: "#quality-gate-testing" },
              {title: "Production: Deploy Production", url: "#production-deploy-production" },
          ]},
        ];

    </script>
    <script src="https://tracepaper.draftsman.io/docs-twee/js/base.js"></script> 
  <script async defer data-domain="tracepaper.draftsman.io/docs-twee" src="https://analytics.bohanssen.com/js/plausible.js"></script>

</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="QualityGate/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="QualityGate/" class="btn btn-xs btn-link">
        Quality Gate
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../03_Utils/01_expressions/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../03_Utils/01_expressions/" class="btn btn-xs btn-link">
        Expressions
      </a>
    </div>
    
  </div>

    

    <h1 id="deployment-pipeline">Deployment Pipeline<a class="headerlink" href="#deployment-pipeline" title="Permanent link">#</a></h1>
<p><img alt="image" src="../images/pipeline.png" /></p>
<p>This documentation outlines the steps involved in our deployment pipeline, explaining the purpose and necessity of each
step to ensure a smooth and reliable process from code generation to production deployment.</p>
<h2 id="generate-prepare-code">Generate: Prepare Code<a class="headerlink" href="#generate-prepare-code" title="Permanent link">#</a></h2>
<h3 id="purpose">Purpose<a class="headerlink" href="#purpose" title="Permanent link">#</a></h3>
<p>The <code>generate</code> step is crucial for converting high-level models into executable code and validating that code through
unit testing. This ensures that the code is correctly generated and functions as intended before moving further along
the pipeline.</p>
<h3 id="process">Process<a class="headerlink" href="#process" title="Permanent link">#</a></h3>
<ol>
<li>
<p><strong>Model Conversion</strong>: The high-level model, which defines the application's structure and behavior, is converted into
   Python code and CloudFormation templates. This step translates abstract models into concrete, executable code and
   infrastructure definitions.</p>
</li>
<li>
<p><strong>Unit Testing</strong>: After the conversion, unit tests are executed to validate the functionality of the generated code.
   Unit tests help identify and fix issues early in the development process, ensuring that individual components of the
   application work correctly in isolation. (These are the modeled test cases in the behavior-flow models).</p>
</li>
</ol>
<h3 id="why-its-needed">Why It's Needed<a class="headerlink" href="#why-its-needed" title="Permanent link">#</a></h3>
<ul>
<li><strong>Accuracy</strong>: Ensures that the model is correctly translated into code.</li>
<li><strong>Early Issue Detection</strong>: Unit tests catch errors early, reducing the risk of bugs in later stages.</li>
<li><strong>Validation</strong>: Confirms that the generated code adheres to expected behaviors and standards.</li>
</ul>
<h2 id="package-prepare-deployment">Package: Prepare Deployment<a class="headerlink" href="#package-prepare-deployment" title="Permanent link">#</a></h2>
<h3 id="purpose_1">Purpose<a class="headerlink" href="#purpose_1" title="Permanent link">#</a></h3>
<p>The <code>package</code> step involves preparing the application artifacts for deployment. These artifacts include all the
necessary files and configurations that CloudFormation requires to deploy the application infrastructure.</p>
<h3 id="process_1">Process<a class="headerlink" href="#process_1" title="Permanent link">#</a></h3>
<ol>
<li><strong>Artifact Creation</strong>: Collect and package the code, CloudFormation templates, and other necessary resources into
   deployable artifacts.</li>
<li><strong>Versioning</strong>: Assign versions to the artifacts to manage releases and ensure consistency across different
   environments.</li>
</ol>
<h3 id="why-its-needed_1">Why It's Needed<a class="headerlink" href="#why-its-needed_1" title="Permanent link">#</a></h3>
<ul>
<li><strong>Consistency</strong>: Ensures that the same artifacts are deployed across different environments, reducing discrepancies.</li>
<li><strong>Preparation</strong>: Packages the application into a format that CloudFormation can process, streamlining the deployment
  process.</li>
</ul>
<h2 id="staging-deploy-staging">Staging: Deploy Staging<a class="headerlink" href="#staging-deploy-staging" title="Permanent link">#</a></h2>
<h3 id="purpose_2">Purpose<a class="headerlink" href="#purpose_2" title="Permanent link">#</a></h3>
<p>The <code>staging</code> step involves deploying the application to a staging environment, which closely mirrors the production
environment. This allows for comprehensive testing and validation before the application is deployed to production.</p>
<h3 id="process_2">Process<a class="headerlink" href="#process_2" title="Permanent link">#</a></h3>
<ol>
<li><strong>Deployment</strong>: Use CloudFormation to deploy the application artifacts to the staging environment.</li>
<li><strong>Configuration</strong>: Configure the staging environment to match the production setup as closely as possible. (e.g.
   manually load API secrets into the staging secrets manager)</li>
</ol>
<h3 id="why-its-needed_2">Why It's Needed<a class="headerlink" href="#why-its-needed_2" title="Permanent link">#</a></h3>
<ul>
<li><strong>Validation</strong>: Provides a realistic environment to test the application, ensuring it behaves as expected in a
  production-like setting.</li>
<li><strong>Risk Mitigation</strong>: Identifies and resolves issues in a controlled environment, reducing the risk of problems in
  production.</li>
</ul>
<h2 id="quality-gate-testing">Quality Gate: Testing<a class="headerlink" href="#quality-gate-testing" title="Permanent link">#</a></h2>
<h3 id="purpose_3">Purpose<a class="headerlink" href="#purpose_3" title="Permanent link">#</a></h3>
<p>The <code>quality gate</code> step involves executing API tests against the staging environment to verify that the application is
stable, functional, and ready for production deployment. This step ensures that the code meets the required quality
standards.</p>
<h3 id="process_3">Process<a class="headerlink" href="#process_3" title="Permanent link">#</a></h3>
<ol>
<li><strong>Cleanup</strong>: Optionally, clear the environments databases and IAM role assignments.</li>
<li><strong>API Testing</strong>: Execute functional and integration tests on the staging environment, focusing on the application's
   API endpoints. These tests are modeled using the Tracepaper tool.</li>
<li><strong>Validation</strong>: Validate that all tests executed successfully.</li>
<li><strong>Coverage</strong>: Validate that there is sufficient coverage regarding the published events in the domain and the view
   queries.</li>
</ol>
<h3 id="why-its-needed_3">Why It's Needed<a class="headerlink" href="#why-its-needed_3" title="Permanent link">#</a></h3>
<ul>
<li><strong>Quality Assurance</strong>: Ensures that the application meets quality standards and is free of critical bugs.</li>
<li><strong>Verification</strong>: Validates that the application behaves correctly under various scenarios and edge cases.</li>
<li><strong>Readiness Check</strong>: Confirms that the application is ready for production deployment.</li>
</ul>
<h2 id="production-deploy-production">Production: Deploy Production<a class="headerlink" href="#production-deploy-production" title="Permanent link">#</a></h2>
<h3 id="purpose_4">Purpose<a class="headerlink" href="#purpose_4" title="Permanent link">#</a></h3>
<p>The <code>production</code> step is the final stage, where the application is deployed to the production environment. This step is
executed only after the application has passed all previous stages, ensuring a smooth and reliable deployment.</p>
<h3 id="process_4">Process<a class="headerlink" href="#process_4" title="Permanent link">#</a></h3>
<ol>
<li><strong>Deployment</strong>: Use CloudFormation to deploy the validated application artifacts to the production environment.</li>
<li><strong>Adviced: Monitoring</strong>: Immediately start monitoring the production environment to detect and address any issues
   that may
   arise post-deployment. This is not provided by Draftsman, we ourselves use <a href="https://lumigo.io">Lumigo.io</a> to monitor
   our applications.</li>
</ol>
<h3 id="why-its-needed_4">Why It's Needed<a class="headerlink" href="#why-its-needed_4" title="Permanent link">#</a></h3>
<ul>
<li><strong>Go-Live</strong>: Makes the application available to end-users.</li>
</ul>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="QualityGate/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="QualityGate/" class="btn btn-xs btn-link">
        Quality Gate
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../03_Utils/01_expressions/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../03_Utils/01_expressions/" class="btn btn-xs btn-link">
        Expressions
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>